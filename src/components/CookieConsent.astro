<!-- Cookie Consent Banner -->
<div id="cookie-consent" class="cookie-banner" style="display: none;">
    <div class="cookie-content">
        <p>
            We use cookies to improve your experience on our website. By
            continuing to browse, you agree to our use of cookies.
            <a
                href="/privacy/"
                style="color: white; text-decoration: underline;">Learn more</a
            >
        </p>
        <div class="cookie-buttons">
            <button id="cookie-accept" class="cookie-btn cookie-btn--accept"
                >Accept</button
            >
            <button id="cookie-decline" class="cookie-btn cookie-btn--decline"
                >Decline</button
            >
        </div>
    </div>
</div>

<style>
    .cookie-banner {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: var(--color-primary);
        color: white;
        padding: 1.5rem;
        box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.1);
        z-index: 9998;
        animation: slideUp 0.3s ease-out;
    }

    @keyframes slideUp {
        from {
            transform: translateY(100%);
        }
        to {
            transform: translateY(0);
        }
    }

    .cookie-content {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 2rem;
        flex-wrap: wrap;
    }

    .cookie-content p {
        margin: 0;
        flex: 1;
        min-width: 250px;
    }

    .cookie-buttons {
        display: flex;
        gap: 1rem;
    }

    .cookie-btn {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 0.5rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
    }

    .cookie-btn--accept {
        background: var(--color-accent);
        color: white;
    }

    .cookie-btn--accept:hover {
        background: #ff7d4a;
    }

    .cookie-btn--decline {
        background: transparent;
        color: white;
        border: 2px solid white;
    }

    .cookie-btn--decline:hover {
        background: rgba(255, 255, 255, 0.1);
    }

    @media (max-width: 768px) {
        .cookie-content {
            flex-direction: column;
            text-align: center;
        }

        .cookie-buttons {
            width: 100%;
            flex-direction: column;
        }

        .cookie-btn {
            width: 100%;
        }
    }
</style>

<script>
    // Cookie consent functionality
    const NO_COOKIE_BANNER = true; // Set to false if cookies needed
    const COOKIE_NAME = "cookieConsent";
    const COOKIE_EXPIRY_DAYS = 365;

    function setCookie(name, value, days) {
        const date = new Date();
        date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
        const expires = "expires=" + date.toUTCString();
        document.cookie = name + "=" + value + ";" + expires + ";path=/";
    }

    function getCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(";");
        for (let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) == " ") c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) == 0)
                return c.substring(nameEQ.length, c.length);
        }
        return null;
    }

    function showCookieBanner() {
        // If this site doesn't use cookies, don't show banner
        if (NO_COOKIE_BANNER) return;

        const consent = getCookie(COOKIE_NAME);
        if (!consent) {
            const banner = document.getElementById("cookie-consent");
            if (banner) {
                banner.style.display = "block";
            }
        }
    }

    function hideCookieBanner() {
        const banner = document.getElementById("cookie-consent");
        if (banner) {
            banner.style.animation = "slideDown 0.3s ease-out";
            setTimeout(() => {
                banner.style.display = "none";
            }, 300);
        }
    }

    // Event listeners
    document.addEventListener("DOMContentLoaded", () => {
        showCookieBanner();

        const acceptBtn = document.getElementById("cookie-accept");
        const declineBtn = document.getElementById("cookie-decline");

        if (acceptBtn) {
            acceptBtn.addEventListener("click", () => {
                setCookie(COOKIE_NAME, "accepted", COOKIE_EXPIRY_DAYS);
                hideCookieBanner();
            });
        }

        if (declineBtn) {
            declineBtn.addEventListener("click", () => {
                setCookie(COOKIE_NAME, "declined", COOKIE_EXPIRY_DAYS);
                hideCookieBanner();
            });
        }
    });

    // Re-initialize after Astro page transitions
    document.addEventListener("astro:page-load", showCookieBanner);
</script>

<style is:inline>
    @keyframes slideDown {
        from {
            transform: translateY(0);
        }
        to {
            transform: translateY(100%);
        }
    }
</style>
